```bash first blade

  /home/xuzhiying/.conda/envs/ldm/lib/python3.8/threading.py(890)_bootstrap()
-> self._bootstrap_inner()
  /home/xuzhiying/.conda/envs/ldm/lib/python3.8/threading.py(932)_bootstrap_inner()
-> self.run()
  /home/xuzhiying/.local/lib/python3.8/site-packages/anyio/_backends/_asyncio.py(807)run()
-> result = context.run(func, *args)
  /data3/zhiying/workspaces/sdwebui/sd-webui-230502/modules/call_queue.py(58)f()
-> res = list(func(*args, **kwargs))
  /data3/zhiying/workspaces/sdwebui/sd-webui-230502/modules/call_queue.py(37)f()
-> res = func(*args, **kwargs)
  /data3/zhiying/workspaces/sdwebui/sd-webui-230502/modules/txt2img.py(250)txt2img()
-> processed = processing.process_images(p)
  /data3/zhiying/workspaces/sdwebui/sd-webui-230502/modules/processing.py(677)process_images()
-> res = process_images_inner(p)
  /data3/zhiying/workspaces/sdwebui/sd-webui-230502/extensions/sd-webui-controlnet/scripts/batch_hijack.py(42)processing_process_images_hij
ack()
-> return getattr(processing, '__controlnet_original_process_images_inner')(p, *args, **kwargs)
  /data3/zhiying/workspaces/sdwebui/sd-webui-230502/modules/processing.py(786)process_images_inner()
-> p.setup_conds()
  /data3/zhiying/workspaces/sdwebui/sd-webui-230502/modules/processing.py(1184)setup_conds()
-> super().setup_conds()
  /data3/zhiying/workspaces/sdwebui/sd-webui-230502/modules/processing.py(364)setup_conds()
-> self.uc = self.get_conds_with_caching(prompt_parser.get_learned_conditioning, negative_prompts, self.steps * self.step_multiplier, [self
.cached_uc], self.extra_network_data)
  /data3/zhiying/workspaces/sdwebui/sd-webui-230502/modules/processing.py(353)get_conds_with_caching()
-> cache[1] = function(shared.sd_model, required_prompts, steps)
  /data3/zhiying/workspaces/sdwebui/sd-webui-230502/modules/prompt_parser.py(163)get_learned_conditioning()
-> conds = model.get_learned_conditioning(texts)
/home/xuzhiying/zhiying/workspaces/sdwebui/sd-webui-230502/repositories/stable-diffusion-stability-ai/ldm/models/diffusion/ddpm.py(669)get_learned_conditioning()
-> c = self.cond_stage_model(c)
  /home/xuzhiying/.conda/envs/ldm/lib/python3.8/site-packages/torch/nn/modules/module.py(1130)_call_impl()
-> return forward_call(*input, **kwargs)
  /data3/zhiying/workspaces/sdwebui/sd-webui-230502/modules/sd_hijack_clip.py(235)forward()
-> z = self.process_tokens(tokens, multipliers)
  /data3/zhiying/workspaces/sdwebui/sd-webui-230502/modules/sd_hijack_clip.py(272)process_tokens()
-> z = self.encode_with_transformers(tokens)
  /data3/zhiying/workspaces/sdwebui/sd-webui-230502/modules/sd_hijack_clip.py(325)encode_with_transformers()
-> outputs = self.wrapped.transformer(input_ids=tokens, output_hidden_states=-opts.CLIP_stop_at_last_layers)
  /home/xuzhiying/.conda/envs/ldm/lib/python3.8/site-packages/torch/nn/modules/module.py(1130)_call_impl()
-> return forward_call(*input, **kwargs)
  /home/xuzhiying/.conda/envs/ldm/lib/python3.8/site-packages/transformers/models/clip/modeling_clip.py(811)forward()
-> return self.text_model(
  /home/xuzhiying/.conda/envs/ldm/lib/python3.8/site-packages/torch/nn/modules/module.py(1130)_call_impl()
-> return forward_call(*input, **kwargs)
  /home/xuzhiying/.conda/envs/ldm/lib/python3.8/site-packages/transformers/models/clip/modeling_clip.py(721)forward()
-> encoder_outputs = self.encoder(
  /home/xuzhiying/.conda/envs/ldm/lib/python3.8/site-packages/torch/nn/modules/module.py(1130)_call_impl()
-> return forward_call(*input, **kwargs)
  /home/xuzhiying/.conda/envs/ldm/lib/python3.8/site-packages/transformers/models/clip/modeling_clip.py(650)forward()
-> layer_outputs = encoder_layer(
  /home/xuzhiying/.conda/envs/ldm/lib/python3.8/site-packages/torch/nn/modules/module.py(1130)_call_impl()
-> return forward_call(*input, **kwargs)
  /home/xuzhiying/.conda/envs/ldm/lib/python3.8/site-packages/transformers/models/clip/modeling_clip.py(379)forward()
-> hidden_states, attn_weights = self.self_attn(
  /home/xuzhiying/.conda/envs/ldm/lib/python3.8/site-packages/torch/nn/modules/module.py(1130)_call_impl()
-> return forward_call(*input, **kwargs)
  /home/xuzhiying/.conda/envs/ldm/lib/python3.8/site-packages/transformers/models/clip/modeling_clip.py(268)forward()
-> query_states = self.q_proj(hidden_states) * self.scale
  /home/xuzhiying/.conda/envs/ldm/lib/python3.8/site-packages/torch/nn/modules/module.py(1130)_call_impl()
-> return forward_call(*input, **kwargs)
  /data3/zhiying/workspaces/sdwebui/sd-webui-230502/extensions/sd-webui-additional-networks/scripts/cp_networks.py(426)network_Linear_forward()
-> network_apply_weights(self, input)
> /data3/zhiying/workspaces/sdwebui/sd-webui-230502/extensions/sd-webui-additional-networks/scripts/cp_networks.py(329)network_apply_weights(
```

``` first addnet and then blade
  /home/xuzhiying/.conda/envs/ldm/lib/python3.8/threading.py(890)_bootstrap()
-> self._bootstrap_inner()
  /home/xuzhiying/.conda/envs/ldm/lib/python3.8/threading.py(932)_bootstrap_inner()
-> self.run()
  /home/xuzhiying/.local/lib/python3.8/site-packages/anyio/_backends/_asyncio.py(807)run()
-> result = context.run(func, *args)
  /data3/zhiying/workspaces/sdwebui/sd-webui-230502/modules/call_queue.py(58)f()
-> res = list(func(*args, **kwargs))
  /data3/zhiying/workspaces/sdwebui/sd-webui-230502/modules/call_queue.py(37)f()
-> res = func(*args, **kwargs)
  /data3/zhiying/workspaces/sdwebui/sd-webui-230502/modules/txt2img.py(250)txt2img()
-> processed = processing.process_images(p)
  /data3/zhiying/workspaces/sdwebui/sd-webui-230502/modules/processing.py(677)process_images()
-> res = process_images_inner(p)
  /data3/zhiying/workspaces/sdwebui/sd-webui-230502/extensions/sd-webui-controlnet/scripts/batch_hijack.py(42)processing_process_images_hij
ack()
-> return getattr(processing, '__controlnet_original_process_images_inner')(p, *args, **kwargs)
  /data3/zhiying/workspaces/sdwebui/sd-webui-230502/modules/processing.py(797)process_images_inner()
-> samples_ddim = p.sample(conditioning=p.c, unconditional_conditioning=p.uc, seeds=p.seeds, subseeds=p.subseeds, subseed_strength=p.subsee
d_strength, prompts=p.prompts)
  /data3/zhiying/workspaces/sdwebui/sd-webui-230502/modules/processing.py(1047)sample()
-> samples = self.sampler.sample(self, x, conditioning, unconditional_conditioning, image_conditioning=self.txt2img_image_conditioning(x))
  /data3/zhiying/workspaces/sdwebui/sd-webui-230502/modules/sd_samplers_kdiffusion.py(464)sample()
-> samples = self.launch_sampling(steps, lambda: self.func(self.model_wrap_cfg, x, extra_args={
  /data3/zhiying/workspaces/sdwebui/sd-webui-230502/modules/sd_samplers_kdiffusion.py(303)launch_sampling()
-> return func()
  /data3/zhiying/workspaces/sdwebui/sd-webui-230502/modules/sd_samplers_kdiffusion.py(464)<lambda>()
-> samples = self.launch_sampling(steps, lambda: self.func(self.model_wrap_cfg, x, extra_args={
  /home/xuzhiying/.conda/envs/ldm/lib/python3.8/site-packages/torch/autograd/grad_mode.py(27)decorate_context()
-> return func(*args, **kwargs)
  /data3/zhiying/workspaces/sdwebui/sd-webui-230502/repositories/k-diffusion/k_diffusion/sampling.py(150)sample_euler_ancestral()
-> denoised = model(x, sigmas[i] * s_in, **extra_args)
  /home/xuzhiying/.conda/envs/ldm/lib/python3.8/site-packages/torch/nn/modules/module.py(1130)_call_impl()
-> return forward_call(*input, **kwargs)
  /data3/zhiying/workspaces/sdwebui/sd-webui-230502/modules/sd_samplers_kdiffusion.py(183)forward()
-> x_out = self.inner_model(x_in, sigma_in, cond=make_condition_dict(cond_in, image_cond_in))
  /home/xuzhiying/.conda/envs/ldm/lib/python3.8/site-packages/torch/nn/modules/module.py(1130)_call_impl()
-> return forward_call(*input, **kwargs)
  /data3/zhiying/workspaces/sdwebui/sd-webui-230502/repositories/k-diffusion/k_diffusion/external.py(112)forward()
-> eps = self.get_eps(input * c_in, self.sigma_to_t(sigma), **kwargs)
  /data3/zhiying/workspaces/sdwebui/sd-webui-230502/repositories/k-diffusion/k_diffusion/external.py(138)get_eps()
-> return self.inner_model.apply_model(*args, **kwargs)
  /data3/zhiying/workspaces/sdwebui/sd-webui-230502/modules/sd_hijack_utils.py(17)<lambda>()
-> setattr(resolved_obj, func_path[-1], lambda *args, **kwargs: self(*args, **kwargs))
  /data3/zhiying/workspaces/sdwebui/sd-webui-230502/modules/sd_hijack_utils.py(28)__call__()
-> return self.__orig_func(*args, **kwargs)
  /home/xuzhiying/zhiying/workspaces/sdwebui/sd-webui-230502/repositories/stable-diffusion-stability-ai/ldm/models/diffusion/ddpm.py(859)apply_model()
-> x_recon = self.model(x_noisy, t, **cond)
  /home/xuzhiying/.conda/envs/ldm/lib/python3.8/site-packages/torch/nn/modules/module.py(1130)_call_impl()
-> return forward_call(*input, **kwargs)
  /home/xuzhiying/zhiying/workspaces/sdwebui/sd-webui-230502/repositories/stable-diffusion-stability-ai/ldm/models/diffusion/ddpm.py(1337)forward()
-> out = self.diffusion_model(x, t, context=cc)
  /home/xuzhiying/.conda/envs/ldm/lib/python3.8/site-packages/torch/nn/modules/module.py(1130)_call_impl()
-> return forward_call(*input, **kwargs)
  /data3/zhiying/workspaces/sdwebui/sd-webui-230502/modules/sd_unet.py(91)UNetModel_forward()
-> return ldm.modules.diffusionmodules.openaimodel.copy_of_UNetModel_forward_for_webui(self, x, timesteps, context, *args, **kwargs)
  /home/xuzhiying/zhiying/workspaces/sdwebui/sd-webui-230502/repositories/stable-diffusion-stability-ai/ldm/modules/diffusionmodules/openaimodel.py(790)forward()
-> emb = self.time_embed(t_emb)
  /home/xuzhiying/.conda/envs/ldm/lib/python3.8/site-packages/torch/nn/modules/module.py(1130)_call_impl()
-> return forward_call(*input, **kwargs)
  /home/xuzhiying/.conda/envs/ldm/lib/python3.8/site-packages/torch/nn/modules/container.py(139)forward()
-> input = module(input)
  /home/xuzhiying/.conda/envs/ldm/lib/python3.8/site-packages/torch/nn/modules/module.py(1130)_call_impl()
-> return forward_call(*input, **kwargs)
  /data3/zhiying/workspaces/sdwebui/sd-webui-230502/extensions/sd-webui-additional-networks/scripts/cp_networks.py(426)network_Linear_forward()
-> network_apply_weights(self, input)
> /data3/zhiying/workspaces/sdwebui/sd-webui-230502/extensions/sd-webui-additional-networks/scripts/cp_networks.py(329)network_apply_weights()
-> if network_layer_name is None:
```